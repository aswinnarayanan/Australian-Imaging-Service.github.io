<!doctype html><html lang=en class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.88.1"><meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel="shortcut icon" href=/favicons/favicon.ico>
<link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192>
<title>Australian Imaging Service</title>
<meta name=description content><meta property="og:title" content>
<meta property="og:description" content="List of steps to be followed to deploy XNAT in Linode LKE using Helm charts
1.LKE Cluster Setup:
Set up the Linode LKE cluster using the link https://www.linode.com/docs/guides/how-to-deploy-an-lke-cluster-using-terraform/ (Please note that a separate documentation for setting up LKE Cluster using Terraform will be coming up soon)
2.Preparing for Tweaks pertaining to Linode:
As we are tweaking XNAT Values related to PV access modes, let us check out the charts repo rather than using the adding AIS helm chart repository.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://australian-imaging-service.github.io/docs/deployment/linode-setup/"><meta property="article:section" content="docs">
<meta itemprop=name content>
<meta itemprop=description content="List of steps to be followed to deploy XNAT in Linode LKE using Helm charts
1.LKE Cluster Setup:
Set up the Linode LKE cluster using the link https://www.linode.com/docs/guides/how-to-deploy-an-lke-cluster-using-terraform/ (Please note that a separate documentation for setting up LKE Cluster using Terraform will be coming up soon)
2.Preparing for Tweaks pertaining to Linode:
As we are tweaking XNAT Values related to PV access modes, let us check out the charts repo rather than using the adding AIS helm chart repository.">
<meta itemprop=wordCount content="743">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content>
<meta name=twitter:description content="List of steps to be followed to deploy XNAT in Linode LKE using Helm charts
1.LKE Cluster Setup:
Set up the Linode LKE cluster using the link https://www.linode.com/docs/guides/how-to-deploy-an-lke-cluster-using-terraform/ (Please note that a separate documentation for setting up LKE Cluster using Terraform will be coming up soon)
2.Preparing for Tweaks pertaining to Linode:
As we are tweaking XNAT Values related to PV access modes, let us check out the charts repo rather than using the adding AIS helm chart repository.">
<link rel=preload href=/scss/main.min.a297386ca48b17e0c043ee28776ce3a30b14c8baadd081e294f064fac523b4f4.css as=style>
<link href=/scss/main.min.a297386ca48b17e0c043ee28776ce3a30b14c8baadd081e294f064fac523b4f4.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script>
</head>
<body class=td-page>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=/>
<span class=navbar-logo></span><span class="text-uppercase font-weight-bold">Australian Imaging Service</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/docs/ target=_blank><span class=active>Dev Documentation</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/user_docs/ target=_blank><span>User Documentation</span></a>
</li>
</ul>
</div>
<div class="navbar-nav d-none d-lg-block">
<input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.5243fc487276ef8e412207bcd4f08274.json data-offline-search-base-href=/ data-offline-search-max-results=10>
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
<div id=td-sidebar-menu class=td-sidebar__inner>
<form class="td-sidebar__search d-flex align-items-center">
<input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.5243fc487276ef8e412207bcd4f08274.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation">
</button>
</form>
<nav class="collapse td-sidebar-nav" id=td-section-nav>
<ul class="td-sidebar-nav__section pr-md-3 ul-0">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li>
<a href=/docs/ title=Documentation class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Dev Documentation</span></a>
<ul class=ul-1>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsinstruments-li>
<a href=/docs/instruments/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsinstruments><span>Instruments</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsinstrumentsrc-milabsu-ct-li>
<a href=/docs/instruments/rc-milabsu-ct/ title="RC MILabsU-CT" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsinstrumentsrc-milabsu-ct><span>MILabs U-CT</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsinstruments3t-and-7t-mri-li>
<a href=/docs/instruments/3t-and-7t-mri/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsinstruments3t-and-7t-mri><span>MR Solutions 3T & 7T MRI</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsinstrumentssiemens-artis-pheno-li>
<a href=/docs/instruments/siemens-artis-pheno/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsinstrumentssiemens-artis-pheno><span>Siemens ARTIS pheno</span></a>
</li>
</ul>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsrepositories-li>
<a href=/docs/repositories/ title="Top level overview of the AIS repositories" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsrepositories><span>Repositories</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsdeployment-li>
<a href=/docs/deployment/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsdeployment><span>Deployment</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentalb-ingress-controller-li>
<a href=/docs/deployment/alb-ingress-controller/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentalb-ingress-controller><span>ALB Ingress Controller</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentazure-setup-full-li>
<a href=/docs/deployment/azure-setup-full/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentazure-setup-full><span>Azure Setup Full</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsdeploymentlinode-setup-li>
<a href=/docs/deployment/linode-setup/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentlinode-setup><span class=td-sidebar-nav-active-item></span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentreadme-li>
<a href=/docs/deployment/readme/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentreadme><span></span></a>
</li>
</ul>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsdevelopment-li>
<a href=/docs/development/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsdevelopment><span>Development</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdevelopmentcicd-li>
<a href=/docs/development/cicd/ title="Continuous Integration / Continuous Delivery" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentcicd><span>CI/CD</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdevelopmentmacos-multipass-k8s-li>
<a href=/docs/development/macos-multipass-k8s/ title="Development workstation with Multipass on MacOS" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentmacos-multipass-k8s><span>MacOS+Multipass</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdevelopmentubuntu-microk8s-li>
<a href=/docs/development/ubuntu-microk8s/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentubuntu-microk8s><span>microk8s-Ubuntu</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdevelopmentnixos-minikube-li>
<a href=/docs/development/nixos-minikube/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentnixos-minikube><span>NixOS + Minikube</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdevelopmentreferences-li>
<a href=/docs/development/references/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentreferences><span>References</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdevelopmentwindows10-multipass-k8s-li>
<a href=/docs/development/windows10-multipass-k8s/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentwindows10-multipass-k8s><span>Windows 10+Multipass</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdevelopmentxnat-chart-readme-li>
<a href=/docs/development/xnat-chart-readme/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentxnat-chart-readme><span>XNAT chart README</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdevelopmentreadme-li>
<a href=/docs/development/readme/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentreadme><span></span></a>
</li>
</ul>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsoperations-li>
<a href=/docs/operations/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsoperations><span>Operations</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsaaf-integration-li>
<a href=/docs/operations/aaf-integration/ title="Integrating AAF with AIS Kubernetes XNAT Deployment" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsaaf-integration><span>AAF Integration</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsautoscaling-xnat-kubernetes-with-eks-li>
<a href=/docs/operations/autoscaling-xnat-kubernetes-with-eks/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsautoscaling-xnat-kubernetes-with-eks><span>Autoscaling XNAT on Kubernetes with EKS</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsdocker-swarm-with-xnat-li>
<a href=/docs/operations/docker-swarm-with-xnat/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsdocker-swarm-with-xnat><span>Docker-Swarm-with-XNAT</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsexternal-pgsql-db-connection-li>
<a href=/docs/operations/external-pgsql-db-connection/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsexternal-pgsql-db-connection><span>External-PGSQL-DB-Connection</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsrecommendations-li>
<a href=/docs/operations/recommendations/ title="Operational recommendations" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsrecommendations><span>Recommendations</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsreadme-li>
<a href=/docs/operations/readme/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsreadme><span></span></a>
</li>
</ul>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscontributing-li>
<a href=/docs/contributing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscontributing><span>Contributing</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscontributingdocumentation-li>
<a href=/docs/contributing/documentation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscontributingdocumentation><span>Documentation</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscontributingdocumentationshortcodes-li>
<a href=/docs/contributing/documentation/shortcodes/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributingdocumentationshortcodes><span>Shortcodes</span></a>
</li>
</ul>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscontributingnew-repo-li>
<a href=/docs/contributing/new-repo/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributingnew-repo><span>Integrating a new repository</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscontributingreadme-li>
<a href=/docs/contributing/readme/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributingreadme><span></span></a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</div>
</aside>
<aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href=https://github.com/Australian-Imaging-Service/charts/edit/main/docs/Deployment/Linode-setup.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/Australian-Imaging-Service/charts/new/main/docs/Deployment/Linode-setup.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/Australian-Imaging-Service/charts/issues/new?title=" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
</div>
</aside>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<nav aria-label=breadcrumb class="d-none d-md-block d-print-none">
<ol class="breadcrumb spb-1">
<li class=breadcrumb-item>
<a href=https://australian-imaging-service.github.io/docs/>Dev Documentation</a>
</li>
<li class=breadcrumb-item>
<a href=https://australian-imaging-service.github.io/docs/deployment/>Deployment</a>
</li>
<li class="breadcrumb-item active" aria-current=page>
<a href=https://australian-imaging-service.github.io/docs/deployment/linode-setup/></a>
</li>
</ol>
</nav>
<div class=td-content>
<h1></h1>
<header class=article-meta>
</header>
<p><strong>List of steps to be followed to deploy XNAT in Linode LKE using Helm charts</strong></p>
<p><strong>1.LKE Cluster Setup:</strong><br>
Set up the Linode LKE cluster using the link <a href=https://www.linode.com/docs/guides/how-to-deploy-an-lke-cluster-using-terraform/>https://www.linode.com/docs/guides/how-to-deploy-an-lke-cluster-using-terraform/</a> <strong>(Please note that a separate documentation for setting up LKE Cluster using Terraform will be coming up soon)</strong></p>
<p><strong>2.Preparing for Tweaks pertaining to Linode:</strong><br>
As we are tweaking XNAT Values related to PV access modes, let us check out the charts repo rather than using the adding
AIS helm chart repository.</p>
<pre><code>     git clone https://github.com/Australian-Imaging-Service/charts.git
</code></pre>
<p><strong>3.Actual Tweaks:</strong><br>
Replace the access modes of all Volumes from &ldquo;ReadWriteMany&rdquo; to &ldquo;ReadWriteOnce&rdquo; in charts/releases/xnat/charts/xnat-web
This is because Linode storage only supports &ldquo;ReadWriteOnce&rdquo; at this point of time.</p>
<p><strong>4.Dependency Update:</strong><br>
Update the dependency by switching to charts/releases/xnat and execute the following</p>
<pre><code>     helm dependency update
</code></pre>
<p><strong>5.XNAT Initial Installation:</strong><br>
Go to charts/releases and install xnat using helm.</p>
<pre><code>       kubectl create namespace xnat

       helm install xnat-deployment xnat --values YOUR-VALUES-FILE --namespace=xnat
</code></pre>
<p>The XNAT & POSTGRES service should be up & running fine. Linode Storage Class &ldquo;linode-block-storage-retain&rdquo; should have automatically
come in place & PVs will be auto created to be consumed by our mentioned PVCs.</p>
<p><strong>6.Ingress Controller/Load balancer Installation:</strong><br>
Install Ingress Controller and provision a Load balancer (Nodebalancer in Linode) by executing these commands</p>
<pre><code>        helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx

        helm repo update

        helm install ingress-nginx ingress-nginx/ingress-nginx
</code></pre>
<p>You may see an output like below</p>
<blockquote>
<p>NAME: ingress-nginx<br>
LAST DEPLOYED: Mon Aug 2 11:51:32 2021<br>
NAMESPACE: default<br>
STATUS: deployed<br>
REVISION: 1<br>
TEST SUITE: None<br>
NOTES:<br>
The ingress-nginx controller has been installed.<br>
It may take a few minutes for the LoadBalancer IP to be available.</p>
</blockquote>
<p><strong>7.Domain Mapping:</strong><br>
Get the External IP address of the Loadbalancer by running the below command and assign it to any domain or subdomain.</p>
<blockquote>
<p><strong>Example: cloud.neura.edu.au is the subdomain for which the loadbalancer IP is assigned in my case. Please replace it with your domain in this and all upcoming steps</strong></p>
</blockquote>
<pre><code>        kubectl --namespace default get services -o wide -w ingress-nginx-controller
</code></pre>
<p><strong>8.HTTP Traffic Routing via Ingress:</strong><br>
It is time to create a Ingress object that directs the traffic based on the host/domain to the already available XNAT service.
Get the XNAT service name by issuing the below command and choose the service name that says TYPE as ClusterIP</p>
<pre><code>      kubectl get svc -nxnat -l &quot;app.kubernetes.io/name=xnat-web&quot;
</code></pre>
<p>Example: xnat-deployment-xnat-web</p>
<p>Using the above service name, write an ingress object to route the external traffic based on the domain name.</p>
<pre><code>     apiVersion: networking.k8s.io/v1
     kind: Ingress
     metadata:
       name: xnat-ingress
       namespace: xnat
       annotations:
         kubernetes.io/ingress.class: nginx
     spec:
       rules:
       - host: cloud.neura.edu.au
         http:
           paths:
           - pathType: Prefix
             path: &quot;/&quot;
             backend:
               service:
                 name: xnat-deployment-xnat-web
                 port:
                   number: 80
</code></pre>
<p><strong>9.Delete the HTTP Ingress project:</strong><br>
After the creation of this Ingress object, make sure cloud.neura.edu.au is routed to the XNAT application over HTTP successfully.Let us delete the ingress object after checking because we will be creating another one with TLS to use HTTPS.</p>
<pre><code>    kubectl delete ingress xnat-ingress -nxnat
</code></pre>
<p><strong>10.Install cert-manager for Secure Connection HTTPS</strong><br>
Install cert-manager’s CRDs.</p>
<pre><code>     kubectl apply -f https://github.com/jetstack/cert-manager/releases/download/v1.3.1/cert-manager.crds.yaml
</code></pre>
<p>Create a cert-manager namespace.</p>
<pre><code>     kubectl create namespace cert-manager
</code></pre>
<p>Add the Helm repository which contains the cert-manager Helm chart.</p>
<pre><code>     helm repo add jetstack https://charts.jetstack.io
</code></pre>
<p>Update your Helm repositories.</p>
<pre><code>     helm repo update
</code></pre>
<p>Install the cert-manager Helm chart.</p>
<pre><code>     helm install \
     cert-manager jetstack/cert-manager \
     --namespace cert-manager \
     --version v1.3.1
</code></pre>
<p>Verify that the corresponding cert-manager pods are now running.</p>
<pre><code>     kubectl get pods --namespace cert-manager
</code></pre>
<p>You should see a similar output:</p>
<blockquote>
<p>NAME READY STATUS RESTARTS AGE<br>
cert-manager-579d48dff8-84nw9 1/1 Running 3 1m<br>
cert-manager-cainjector-789955d9b7-jfskr 1/1 Running 3 1m<br>
cert-manager-webhook-64869c4997-hnx6n 1/1 Running 0 1m</p>
</blockquote>
<p><strong>11.Creation of ClusterIssuer to Issue certificates:</strong><br>
Create a manifest file named acme-issuer-prod.yaml that will be used to create a ClusterIssuer resource on your cluster. Ensure you replace <a href=mailto:user@example.com>user@example.com</a> with your own email address.</p>
<pre><code>     apiVersion: cert-manager.io/v1
     kind: ClusterIssuer
     metadata:
       name: letsencrypt-prod
       namespace: xnat
     spec:
       acme:
         email: user@example.com
         server: https://acme-v02.api.letsencrypt.org/directory
         privateKeySecretRef:
           name: letsencrypt-secret-prod
         solvers:
         - http01:
             ingress:
               class: nginx
</code></pre>
<p><strong>12.HTTPS Routing with Ingress object leveraging ClusterIssuer:</strong><br>
Provision a new Ingress object to use the clusterIssuer for the generation of the certificate and use it</p>
<pre><code>     apiVersion: networking.k8s.io/v1
     kind: Ingress
     metadata:
       name: xnat-ingress-https
       namespace: xnat
       annotations:
         kubernetes.io/ingress.class: &quot;nginx&quot;
         cert-manager.io/cluster-issuer: &quot;letsencrypt-prod&quot;
     spec:
       tls:
       - hosts:
         - cloud.neura.edu.au
         secretName: xnat-tls
       rules:
       - host: cloud.neura.edu.au
         http:
           paths:
           - pathType: Prefix
             path: &quot;/&quot;
             backend:
               service:
                 name: xnat-deployment-xnat-web
                 port:
                   number: 80
</code></pre>
<p>After the creation of the above ingress <a href=https://cloud.neura.edu.au/>https://cloud.neura.edu.au/</a> should bring up the XNAT application in the web browser</p>
<p><strong>Reference Links</strong><br>
LKE set up using Cloud Manager - <a href=https://www.linode.com/docs/guides/deploy-and-manage-a-cluster-with-linode-kubernetes-engine-a-tutorial/>https://www.linode.com/docs/guides/deploy-and-manage-a-cluster-with-linode-kubernetes-engine-a-tutorial/</a><br>
LKE set up using Terraform - <a href=https://www.linode.com/docs/guides/how-to-deploy-an-lke-cluster-using-terraform/>https://www.linode.com/docs/guides/how-to-deploy-an-lke-cluster-using-terraform/</a><br>
Linode Storage Class - <a href=https://www.linode.com/docs/guides/deploy-volumes-with-the-linode-block-storage-csi-driver/>https://www.linode.com/docs/guides/deploy-volumes-with-the-linode-block-storage-csi-driver/</a><br>
Ingress Controller & Loadbalancer- <a href=https://www.linode.com/docs/guides/how-to-deploy-nginx-ingress-on-linode-kubernetes-engine/>https://www.linode.com/docs/guides/how-to-deploy-nginx-ingress-on-linode-kubernetes-engine/</a><br>
HTTP to HTTPS using cert-manager - <a href=https://www.linode.com/docs/guides/how-to-configure-load-balancing-with-tls-encryption-on-a-kubernetes-cluster>https://www.linode.com/docs/guides/how-to-configure-load-balancing-with-tls-encryption-on-a-kubernetes-cluster</a></p>
<div class="text-muted mt-5 pt-3 border-top">
</div>
</div>
</main>
</div>
</div>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script>
<script src=/js/main.min.3b172c13b62c2bea8b1c9d2599cddc8cf89718a92d792c680871c81ba43d8c85.js integrity="sha256-OxcsE7YsK+qLHJ0lmc3cjPiXGKkteSxoCHHIG6Q9jIU=" crossorigin=anonymous></script>
</body>
</html>